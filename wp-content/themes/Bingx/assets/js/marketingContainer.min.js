/*! marketing-container v1.3.0 built on 2022-11-17 - Copyright (c) X-Trade Brokers Dom Maklerski S.A., 2017. / store.js - Copyright (c) 2010-2017 Marcus Westin */
!(function (e) {
  if ("object" == typeof exports && "undefined" != typeof module)
    module.exports = e();
  else if ("function" == typeof define && define.amd) define([], e);
  else {
    ("undefined" != typeof window
      ? window
      : "undefined" != typeof global
      ? global
      : "undefined" != typeof self
      ? self
      : this
    ).store = e();
  }
})(function () {
  return (function o(s, a, c) {
    function u(t, e) {
      if (!a[t]) {
        if (!s[t]) {
          var r = "function" == typeof require && require;
          if (!e && r) return r(t, !0);
          if (f) return f(t, !0);
          var n = new Error("Cannot find module '" + t + "'");
          throw ((n.code = "MODULE_NOT_FOUND"), n);
        }
        var i = (a[t] = { exports: {} });
        s[t][0].call(
          i.exports,
          function (e) {
            return u(s[t][1][e] || e);
          },
          i,
          i.exports,
          o,
          s,
          a,
          c
        );
      }
      return a[t].exports;
    }
    for (
      var f = "function" == typeof require && require, e = 0;
      e < c.length;
      e++
    )
      u(c[e]);
    return u;
  })(
    {
      1: [
        function (e, t, r) {
          "use strict";
          var n = e("../src/store-engine"),
            i = [
              e("../storages/localStorage"),
              e("../storages/sessionStorage"),
              e("../storages/cookieStorage"),
              e("../storages/memoryStorage"),
            ];
          t.exports = n.createStore(i, []);
        },
        {
          "../src/store-engine": 2,
          "../storages/cookieStorage": 4,
          "../storages/localStorage": 5,
          "../storages/memoryStorage": 6,
          "../storages/sessionStorage": 7,
        },
      ],
      2: [
        function (e, t, r) {
          "use strict";
          function n(e, t) {
            var r = c(
              {
                _seenPlugins: [],
                _namespacePrefix: "",
                _namespaceRegexp: null,
                _legalNamespace: /^[a-zA-Z0-9_\-]+$/,
                _storage: function () {
                  if (!this.enabled)
                    throw new Error(
                      "store.js: No supported storage has been added! Add one (e.g store.addStorage(require('store/storages/cookieStorage')) or use a build with more built-in storages (e.g https://github.com/marcuswestin/store.js/tree/master/dist/store.legacy.min.js)"
                    );
                  return this._storage.resolved;
                },
                _testStorage: function (e) {
                  try {
                    var t = "__storejs__test__";
                    e.write(t, t);
                    var r = e.read(t) === t;
                    return e.remove(t), r;
                  } catch (e) {
                    return !1;
                  }
                },
                _assignPluginFnProp: function (n, e) {
                  var i = this[e];
                  this[e] = function () {
                    var r = o(arguments, 0),
                      e = this,
                      t = [
                        function () {
                          if (i)
                            return (
                              a(arguments, function (e, t) {
                                r[t] = e;
                              }),
                              i.apply(e, r)
                            );
                        },
                      ].concat(r);
                    return n.apply(e, t);
                  };
                },
                _serialize: function (e) {
                  return JSON.stringify(e);
                },
                _deserialize: function (t, e) {
                  if (!t) return e;
                  var r = "";
                  try {
                    r = JSON.parse(t);
                  } catch (e) {
                    r = t;
                  }
                  return void 0 !== r ? r : e;
                },
              },
              g
            );
            return (
              a(e, function (e) {
                r.addStorage(e);
              }),
              a(t, function (e) {
                r.addPlugin(e);
              }),
              r
            );
          }
          var i = e("./util"),
            o = i.slice,
            s = i.pluck,
            a = i.each,
            c = i.create,
            u = i.isList,
            f = i.isFunction,
            l = i.isObject,
            g = {
              version: "2.0.4",
              enabled: !(t.exports = { createStore: n }),
              storage: null,
              addStorage: function (e) {
                this.enabled ||
                  (this._testStorage(e) &&
                    ((this._storage.resolved = e),
                    (this.enabled = !0),
                    (this.storage = e.name)));
              },
              addPlugin: function (r) {
                var n = this;
                if (u(r))
                  a(r, function (e) {
                    n.addPlugin(e);
                  });
                else if (
                  !s(this._seenPlugins, function (e) {
                    return r === e;
                  })
                ) {
                  if ((this._seenPlugins.push(r), !f(r)))
                    throw new Error(
                      "Plugins must be function values that return objects"
                    );
                  var e = r.call(this);
                  if (!l(e))
                    throw new Error(
                      "Plugins must return an object of function properties"
                    );
                  a(e, function (e, t) {
                    if (!f(e))
                      throw new Error(
                        "Bad plugin property: " +
                          t +
                          " from plugin " +
                          r.name +
                          ". Plugins should only return functions."
                      );
                    n._assignPluginFnProp(e, t);
                  });
                }
              },
              get: function (e, t) {
                var r = this._storage().read(this._namespacePrefix + e);
                return this._deserialize(r, t);
              },
              set: function (e, t) {
                return void 0 === t
                  ? this.remove(e)
                  : (this._storage().write(
                      this._namespacePrefix + e,
                      this._serialize(t)
                    ),
                    t);
              },
              remove: function (e) {
                this._storage().remove(this._namespacePrefix + e);
              },
              each: function (r) {
                var n = this;
                this._storage().each(function (e, t) {
                  r(n._deserialize(e), t.replace(n._namespaceRegexp, ""));
                });
              },
              clearAll: function () {
                this._storage().clearAll();
              },
              hasNamespace: function (e) {
                return this._namespacePrefix == "__storejs_" + e + "_";
              },
              namespace: function (e) {
                if (!this._legalNamespace.test(e))
                  throw new Error(
                    "store.js namespaces can only have alhpanumerics + underscores and dashes"
                  );
                var t = "__storejs_" + e + "_";
                return c(this, {
                  _namespacePrefix: t,
                  _namespaceRegexp: t ? new RegExp("^" + t) : null,
                });
              },
              createStore: function (e, t) {
                return n(e, t);
              },
            };
        },
        { "./util": 3 },
      ],
      3: [
        function (e, u, t) {
          (function (e) {
            "use strict";
            function s(e, t) {
              return Array.prototype.slice.call(e, t || 0);
            }
            function o(e, r) {
              t(e, function (e, t) {
                return r(e, t), !1;
              });
            }
            function t(e, t) {
              if (i(e)) {
                for (var r = 0; r < e.length; r++) if (t(e[r], r)) return e[r];
              } else
                for (var n in e)
                  if (e.hasOwnProperty(n) && t(e[n], n)) return e[n];
            }
            function i(e) {
              return (
                null != e &&
                "function" != typeof e &&
                "number" == typeof e.length
              );
            }
            var a = Object.assign
                ? Object.assign
                : function (r, e, t, n) {
                    for (var i = 1; i < arguments.length; i++)
                      o(Object(arguments[i]), function (e, t) {
                        r[t] = e;
                      });
                    return r;
                  },
              r = (function () {
                if (Object.create)
                  return function (e, t, r, n) {
                    var i = s(arguments, 1);
                    return a.apply(this, [Object.create(e)].concat(i));
                  };
                var o = function () {};
                return function (e, t, r, n) {
                  var i = s(arguments, 1);
                  return (o.prototype = e), a.apply(this, [new o()].concat(i));
                };
              })(),
              n = String.prototype.trim
                ? function (e) {
                    return String.prototype.trim.call(e);
                  }
                : function (e) {
                    return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
                  },
              c = "undefined" != typeof window ? window : e;
            u.exports = {
              assign: a,
              create: r,
              trim: n,
              bind: function (e, t) {
                return function () {
                  return t.apply(e, Array.prototype.slice.call(arguments, 0));
                };
              },
              slice: s,
              each: o,
              map: function (e, r) {
                var n = i(e) ? [] : {};
                return (
                  t(e, function (e, t) {
                    return (n[t] = r(e, t)), !1;
                  }),
                  n
                );
              },
              pluck: t,
              isList: i,
              isFunction: function (e) {
                return e && "[object Function]" === {}.toString.call(e);
              },
              isObject: function (e) {
                return e && "[object Object]" === {}.toString.call(e);
              },
              Global: c,
            };
          }).call(
            this,
            "undefined" != typeof global
              ? global
              : "undefined" != typeof self
              ? self
              : "undefined" != typeof window
              ? window
              : {}
          );
        },
        {},
      ],
      4: [
        function (e, t, r) {
          "use strict";
          function n(e) {
            for (var t = u.cookie.split(/; ?/g), r = t.length - 1; 0 <= r; r--)
              if (c(t[r])) {
                var n = t[r].split("="),
                  i = unescape(n[0]);
                e(unescape(n[1]), i);
              }
          }
          function i(e) {
            e &&
              o(e) &&
              (u.cookie =
                escape(e) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/");
          }
          function o(e) {
            return new RegExp(
              "(?:^|;\\s*)" +
                escape(e).replace(/[\-\.\+\*]/g, "\\$&") +
                "\\s*\\="
            ).test(u.cookie);
          }
          var s = e("../src/util"),
            a = s.Global,
            c = s.trim;
          t.exports = {
            name: "cookieStorage",
            read: function (e) {
              if (!e || !o(e)) return null;
              var t =
                "(?:^|.*;\\s*)" +
                escape(e).replace(/[\-\.\+\*]/g, "\\$&") +
                "\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";
              return unescape(u.cookie.replace(new RegExp(t), "$1"));
            },
            write: function (e, t) {
              e &&
                (u.cookie =
                  escape(e) +
                  "=" +
                  escape(t) +
                  "; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/");
            },
            each: n,
            remove: i,
            clearAll: function () {
              n(function (e, t) {
                i(t);
              });
            },
          };
          var u = a.document;
        },
        { "../src/util": 3 },
      ],
      5: [
        function (e, t, r) {
          "use strict";
          function n() {
            return o.localStorage;
          }
          function i(e) {
            return n().getItem(e);
          }
          var o = e("../src/util").Global;
          t.exports = {
            name: "localStorage",
            read: i,
            write: function (e, t) {
              return n().setItem(e, t);
            },
            each: function (e) {
              for (var t = n().length - 1; 0 <= t; t--) {
                var r = n().key(t);
                e(i(r), r);
              }
            },
            remove: function (e) {
              return n().removeItem(e);
            },
            clearAll: function () {
              return n().clear();
            },
          };
        },
        { "../src/util": 3 },
      ],
      6: [
        function (e, t, r) {
          "use strict";
          t.exports = {
            name: "memoryStorage",
            read: function (e) {
              return n[e];
            },
            write: function (e, t) {
              n[e] = t;
            },
            each: function (e) {
              for (var t in n) n.hasOwnProperty(t) && e(n[t], t);
            },
            remove: function (e) {
              delete n[e];
            },
            clearAll: function (e) {
              n = {};
            },
          };
          var n = {};
        },
        {},
      ],
      7: [
        function (e, t, r) {
          "use strict";
          function n() {
            return o.sessionStorage;
          }
          function i(e) {
            return n().getItem(e);
          }
          var o = e("../src/util").Global;
          t.exports = {
            name: "sessionStorage",
            read: i,
            write: function (e, t) {
              return n().setItem(e, t);
            },
            each: function (e) {
              for (var t = n().length - 1; 0 <= t; t--) {
                var r = n().key(t);
                e(i(r), r);
              }
            },
            remove: function (e) {
              return n().removeItem(e);
            },
            clearAll: function () {
              return n().clear();
            },
          };
        },
        { "../src/util": 3 },
      ],
    },
    {},
    [1]
  )(1);
});
var marketingContainer = function (e) {
    var r = this,
      t = store;
    return (
      (this.storageKey = "marketingData"),
      (this.targetHostname = e.targetHostname),
      (this.iFrameId = "marketingContainer"),
      (this.iFrame = null),
      (this.init = function () {
        return (
          this.testStorage() &&
            (this.initIFrame(),
            window.eventsAttached ||
              (window.addEventListener
                ? window.addEventListener("message", this.receiveMessage, !1)
                : window.attachEvent("onmessage", this.receiveMessage),
              (window.eventsAttached = !0))),
          this
        );
      }),
      (this.createVisitObject = function () {
        return {
          current_hit: this.getVisitObject(),
          current_visit: this.getVisitObject(),
          first_visit: this.getVisitObject(),
          affiliate_visit: this.getVisitObject(),
        };
      }),
      (this.getVisitObject = function () {
        return {
          tracking_url: window.location.href,
          referrer: window.document.referrer,
          timestamp: Date.now(),
        };
      }),
      (this.revalidateVisitSource = function () {
        var e = t.get(this.storageKey);
        e.hasOwnProperty("affiliate_visit") ||
          (e.affiliate_visit = r.getVisitObject()),
          e.hasOwnProperty("current_hit") ||
            (e.current_hit = r.getVisitObject()),
          t.set(this.storageKey, e);
      }),
      (this.convert = function () {
        if (this.iFrame) {
          this.revalidateVisitSource();
          var e = { method: "saveVisitSource", data: t.get(this.storageKey) };
          this.iFrame.contentWindow.postMessage(e, r.targetHostname);
        }
      }),
      (this.initIFrame = function () {
        var e = document.getElementById(this.iFrameId);
        (e && "undefined" != e && "IFRAME" == e.tagName) ||
          (((e = document.createElement("iFrame")).src = this.targetHostname),
          (e.id = this.iFrameId),
          (e.style.display = "none"),
          (e.onload = function (e) {
            var t = { method: "saveVisitSource", data: r.createVisitObject() };
            this.contentWindow.postMessage(t, r.targetHostname);
          }),
          document.body.appendChild(e)),
          (this.iFrame = e);
      }),
      (this.receiveMessage = function (e) {
        e.origin == r.targetHostname && t.set(this.storageKey, e.data);
      }),
      (this.testStorage = function () {
        try {
          var e = r.storageKey + "test";
          return t.set(e, e), t.remove(e), !0;
        } catch (e) {
          return console.log("User storage is not available."), !1;
        }
      }),
      this.init(),
      this
    );
  },
  createMarketingContainer = function (e) {
    var t = document.getElementById("marketingContainerSource");
    if (!t) throw "Cannot find marketing container source id.";
    var r = t.src.match(new RegExp("https?://[^/]*"));
    return marketingContainer({ targetHostname: r.toString() });
  };
